# Simple test Dockerfile
FROM nginx:alpine

# Copy test files
COPY apps/web/public/ /usr/share/nginx/html/

# Create health check file
RUN echo "healthy" > /usr/share/nginx/html/health.txt

# Remove default nginx config
RUN rm /etc/nginx/conf.d/default.conf

# Copy our nginx configuration with fixed port
COPY apps/web/nginx-fixed.conf /etc/nginx/conf.d/default.conf

# Test nginx configuration
RUN nginx -t

# Start nginx
CMD ["nginx", "-g", "daemon off;"]